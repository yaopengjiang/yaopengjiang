<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美味餐厅 - 在线点餐</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // 配置Tailwind自定义颜色
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B35',
                        secondary: '#29335C',
                        accent: '#F7F3E3',
                        neutral: '#E6E8E6',
                        success: '#22c55e',
                        warning: '#f59e0b',
                        info: '#3b82f6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'pulse-soft': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-soft': 'bounce 2s infinite',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both'
                    },
                    keyframes: {
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .menu-item-bg {
                position: relative;
            }
            .menu-item-bg::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-size: cover;
                background-position: center;
                opacity: 0.15;
                z-index: 0;
            }
            .menu-item-content {
                position: relative;
                z-index: 1;
            }
            .badge-new {
                position: absolute;
                top: 10px;
                right: 10px;
                background-color: #FF3366;
                color: white;
                padding: 2px 8px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: bold;
                z-index: 2;
            }
            .notification {
                transform: translateX(-100%);
                animation: slideIn 0.3s forwards, slideOut 0.3s 3s forwards;
            }
            @keyframes slideIn {
                to { transform: translateX(0); }
            }
            @keyframes slideOut {
                to { transform: translateX(-100%); }
            }
            .cart-badge {
                transform: scale(0);
                animation: popIn 0.3s forwards;
            }
            @keyframes popIn {
                0% { transform: scale(0); }
                70% { transform: scale(1.2); }
                100% { transform: scale(1); }
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans relative min-h-screen">
    <!-- 页面背景（置于底层） -->
    <div class="fixed inset-0 bg-accent opacity-20 z-0"></div>
    
    <!-- 通知区域 -->
    <div id="notificationArea" class="fixed top-20 left-4 z-50 flex flex-col gap-2 max-w-xs"></div>
    
    <!-- 导航栏 -->
    <nav class="bg-white/90 backdrop-blur-sm shadow-sm sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fa fa-cutlery text-primary text-2xl mr-2"></i>
                <h1 class="text-xl md:text-2xl font-bold text-secondary">美味餐厅</h1>
            </div>
            
            <div class="hidden md:flex space-x-6">
                <a href="#" class="text-secondary hover:text-primary transition-colors">首页</a>
                <a href="#menu" class="text-secondary hover:text-primary transition-colors">菜单</a>
                <a href="#new-arrivals" class="text-secondary hover:text-primary transition-colors">新品上线</a>
                <a href="#" class="text-secondary hover:text-primary transition-colors">联系我们</a>
            </div>
            
            <div class="flex items-center">
                <!-- 购物车按钮 - 更显眼的设计 -->
                <button id="cartBtn" class="relative bg-primary text-white p-3 rounded-full mr-3 hover:bg-primary/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
                    <i class="fa fa-shopping-cart text-lg"></i>
                    <span id="cartCount" class="absolute -top-1 -right-1 bg-white text-primary text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold cart-badge">0</span>
                </button>
                
                <!-- 移动端菜单按钮 -->
                <button id="mobileMenuBtn" class="md:hidden text-secondary p-2">
                    <i class="fa fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- 移动端菜单 -->
        <div id="mobileMenu" class="md:hidden hidden bg-white border-t">
            <div class="container mx-auto px-4 py-2 flex flex-col space-y-3">
                <a href="#" class="py-2 text-secondary hover:text-primary transition-colors">首页</a>
                <a href="#menu" class="py-2 text-secondary hover:text-primary transition-colors">菜单</a>
                <a href="#new-arrivals" class="py-2 text-secondary hover:text-primary transition-colors">新品上线</a>
                <a href="#" class="py-2 text-secondary hover:text-primary transition-colors">联系我们</a>
            </div>
        </div>
    </nav>
    
    <!-- 轮播图区域 -->
    <div id="carousel" class="relative h-[300px] md:h-[400px] overflow-hidden">
        <div class="carousel-container absolute inset-0 flex transition-transform duration-500">
            <!-- 轮播图片 -->
            <div class="carousel-slide min-w-full h-full">
                <img src="https://picsum.photos/id/292/1200/400" alt="美味汉堡套餐" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-black/30 flex items-center">
                    <div class="container mx-auto px-6">
                        <h2 class="text-white text-3xl md:text-4xl font-bold text-shadow">招牌汉堡套餐</h2>
                        <p class="text-white text-lg mt-2 max-w-md">新鲜食材，独特配方，带给你不一样的味蕾体验</p>
                    </div>
                </div>
            </div>
            <div class="carousel-slide min-w-full h-full">
                <img src="https://picsum.photos/id/431/1200/400" alt="健康沙拉" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-black/30 flex items-center">
                    <div class="container mx-auto px-6">
                        <h2 class="text-white text-3xl md:text-4xl font-bold text-shadow">健康轻食沙拉</h2>
                        <p class="text-white text-lg mt-2 max-w-md">精选有机蔬菜，搭配特制酱料，健康美味</p>
                    </div>
                </div>
            </div>
            <div class="carousel-slide min-w-full h-full">
                <img src="https://picsum.photos/id/488/1200/400" alt="意式披萨" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-black/30 flex items-center">
                    <div class="container mx-auto px-6">
                        <h2 class="text-white text-3xl md:text-4xl font-bold text-shadow">意式手工披萨</h2>
                        <p class="text-white text-lg mt-2 max-w-md">传统工艺，进口芝士，正宗意式风味</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 轮播控制按钮 -->
        <button class="carousel-control absolute top-1/2 left-4 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm transition-all">
            <i class="fa fa-chevron-left"></i>
        </button>
        <button class="carousel-control absolute top-1/2 right-4 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white w-10 h-10 rounded-full flex items-center justify-center backdrop-blur-sm transition-all">
            <i class="fa fa-chevron-right"></i>
        </button>
        
        <!-- 轮播指示器 -->
        <div class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2">
            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all active"></button>
            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all"></button>
            <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all"></button>
        </div>
    </div>
    
    <!-- 新品上线宣传区域 -->
    <section id="new-arrivals" class="py-12 bg-gradient-to-r from-secondary to-secondary/80 text-white relative overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <img src="https://picsum.photos/id/312/1200/400" alt="" class="w-full h-full object-cover">
        </div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold mb-3 flex items-center justify-center">
                    <i class="fa fa-star text-yellow-400 mr-2 animate-pulse-soft"></i>
                    新品上线
                    <i class="fa fa-star text-yellow-400 ml-2 animate-pulse-soft"></i>
                </h2>
                <p class="max-w-2xl mx-auto">尝鲜限时优惠，新品尝鲜价8折，更有机会获得精美小食一份！</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="newArrivalsContainer">
                <!-- 新品会通过JavaScript动态生成 -->
            </div>
            
            <div class="text-center mt-8">
                <a href="#menu" class="inline-block bg-primary hover:bg-primary/90 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 shadow-lg">
                    查看全部菜单
                </a>
            </div>
        </div>
    </section>
    
    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-8 relative z-10">
        <!-- 特色介绍 -->
        <section class="mb-12 text-center">
            <h2 class="text-2xl md:text-3xl font-bold text-secondary mb-4">为什么选择我们</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <i class="fa fa-leaf text-primary text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">新鲜食材</h3>
                    <p class="text-gray-600">每日精选新鲜食材，保证菜品的口感和品质</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <i class="fa fa-bolt text-primary text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">快速配送</h3>
                    <p class="text-gray-600">点餐后30分钟内送达，让您尽快享用美食</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md card-hover">
                    <i class="fa fa-star text-primary text-3xl mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">优质服务</h3>
                    <p class="text-gray-600">专业的服务团队，为您提供愉悦的用餐体验</p>
                </div>
            </div>
        </section>
        
        <!-- 菜单区域 -->
        <section id="menu" class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold text-secondary mb-8 text-center">我们的菜单</h2>
            
            <!-- 菜单分类 -->
            <div class="flex overflow-x-auto pb-4 mb-6 gap-2 scrollbar-hide">
                <button class="category-btn bg-primary text-white px-4 py-2 rounded-full whitespace-nowrap" data-category="all">全部</button>
                <button class="category-btn bg-white text-secondary px-4 py-2 rounded-full whitespace-nowrap hover:bg-gray-100" data-category="burgers">汉堡</button>
                <button class="category-btn bg-white text-secondary px-4 py-2 rounded-full whitespace-nowrap hover:bg-gray-100" data-category="pizza">披萨</button>
                <button class="category-btn bg-white text-secondary px-4 py-2 rounded-full whitespace-nowrap hover:bg-gray-100" data-category="salads">沙拉</button>
                <button class="category-btn bg-white text-secondary px-4 py-2 rounded-full whitespace-nowrap hover:bg-gray-100" data-category="drinks">饮品</button>
            </div>
            
            <!-- 菜品列表 - 优化视觉效果 -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- 菜品会通过JavaScript动态生成 -->
            </div>
        </section>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-secondary text-white py-8 relative z-10">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fa fa-cutlery mr-2"></i>美味餐厅
                    </h3>
                    <p class="mb-4">为您提供最优质的美食和服务，让每一次用餐都成为享受。</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-primary transition-colors"><i class="fa fa-facebook"></i></a>
                        <a href="#" class="text-white hover:text-primary transition-colors"><i class="fa fa-twitter"></i></a>
                        <a href="#" class="text-white hover:text-primary transition-colors"><i class="fa fa-instagram"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">联系我们</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fa fa-map-marker mt-1 mr-3 text-primary"></i>
                            <span>北京市朝阳区建国路88号</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fa fa-phone mr-3 text-primary"></i>
                            <span>010-12345678</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fa fa-envelope mr-3 text-primary"></i>
                            <span>info@meiwei.com</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">营业时间</h3>
                    <ul class="space-y-2">
                        <li class="flex justify-between">
                            <span>周一至周五</span>
                            <span>10:00 - 22:00</span>
                        </li>
                        <li class="flex justify-between">
                            <span>周六至周日</span>
                            <span>09:00 - 23:00</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm">
                <p>&copy; 2023 美味餐厅 版权所有</p>
            </div>
        </div>
    </footer>
    
    <!-- 购物车侧边栏 - 更显眼的设计 -->
    <div id="cartSidebar" class="fixed top-0 right-0 h-full w-full sm:w-96 bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300">
        <div class="h-full flex flex-col">
            <div class="p-4 border-b flex justify-between items-center bg-secondary text-white">
                <h3 class="text-xl font-bold">我的购物车</h3>
                <button id="closeCartBtn" class="text-white hover:text-gray-200">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div id="cartItems" class="flex-1 overflow-y-auto p-4">
                <!-- 购物车内容会通过JavaScript动态生成 -->
                <div class="text-center text-gray-500 py-8">
                    <i class="fa fa-shopping-cart text-4xl mb-2 opacity-30"></i>
                    <p>购物车是空的</p>
                </div>
            </div>
            
            <div class="p-4 border-t">
                <div class="flex justify-between mb-4">
                    <span class="font-semibold">总计:</span>
                    <span id="cartTotal" class="font-bold text-xl text-primary">¥0.00</span>
                </div>
                <!-- 结算按钮更显眼 -->
                <button id="checkoutBtn" class="w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:translate-y-[-2px]" disabled>
                    <i class="fa fa-credit-card mr-2"></i> 结算订单
                </button>
            </div>
        </div>
    </div>
    
    <!-- 结账模态框 -->
    <div id="checkoutModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="checkoutModalContent">
            <div class="p-6 border-b bg-secondary text-white">
                <h3 class="text-xl font-bold">填写订单信息</h3>
            </div>
            <div class="p-6">
                <form id="checkoutForm">
                    <div class="mb-4">
                        <label for="name" class="block text-gray-700 mb-1">姓名</label>
                        <input type="text" id="name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="phone" class="block text-gray-700 mb-1">电话</label>
                        <input type="tel" id="phone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="address" class="block text-gray-700 mb-1">地址</label>
                        <textarea id="address" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label for="notes" class="block text-gray-700 mb-1">备注（可选）</label>
                        <textarea id="notes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                    </div>
                    <div class="flex justify-between items-center mt-6">
                        <button type="button" id="cancelCheckoutBtn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow hover:shadow-md">
                            提交订单
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 订单成功模态框 -->
    <div id="orderSuccessModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 p-6 text-center transform transition-all scale-95 opacity-0" id="successModalContent">
            <div class="text-green-500 text-5xl mb-4">
                <i class="fa fa-check-circle"></i>
            </div>
            <h3 class="text-xl font-bold text-secondary mb-2">订单提交成功！</h3>
            <p class="text-gray-600 mb-6">您的订单已提交，餐厅将尽快为您准备。</p>
            <p class="text-gray-500 mb-6">订单号: <span id="orderNumber" class="font-semibold"></span></p>
            <button id="closeSuccessModal" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow hover:shadow-md">
                确定
            </button>
        </div>
    </div>
    
    <!-- 商家登录模态框 -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 transform transition-all scale-95 opacity-0" id="loginModalContent">
            <div class="p-6 border-b">
                <h3 class="text-xl font-bold text-secondary">商家登录</h3>
            </div>
            <div class="p-6">
                <form id="adminLoginForm">
                    <div class="mb-4">
                        <label for="adminPassword" class="block text-gray-700 mb-1">密码</label>
                        <input type="password" id="adminPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="text-red-500 text-sm mb-4 hidden" id="loginError">
                        密码错误，请重试
                    </div>
                    <div class="flex justify-end mt-6">
                        <button type="button" id="cancelLoginBtn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors mr-2">
                            取消
                        </button>
                        <button type="submit" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow hover:shadow-md">
                            登录
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 添加/编辑菜品模态框 -->
    <div id="editItemModal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform transition-all scale-95 opacity-0" id="editModalContent">
            <div class="p-6 border-b">
                <h3 class="text-xl font-bold text-secondary" id="editItemModalTitle">添加新菜品</h3>
            </div>
            <div class="p-6">
                <form id="editItemForm">
                    <input type="hidden" id="itemId">
                    <div class="mb-4">
                        <label for="itemName" class="block text-gray-700 mb-1">菜品名称</label>
                        <input type="text" id="itemName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="itemDescription" class="block text-gray-700 mb-1">描述</label>
                        <textarea id="itemDescription" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label for="itemPrice" class="block text-gray-700 mb-1">价格</label>
                        <input type="number" step="0.01" min="0" id="itemPrice" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="itemImage" class="block text-gray-700 mb-1">图片URL</label>
                        <input type="text" id="itemImage" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="itemCategory" class="block text-gray-700 mb-1">分类</label>
                        <select id="itemCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" required>
                            <option value="burgers">汉堡</option>
                            <option value="pizza">披萨</option>
                            <option value="salads">沙拉</option>
                            <option value="drinks">饮品</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="itemActive" class="form-checkbox h-5 w-5 text-primary" checked>
                            <span class="ml-2 text-gray-700">上架销售</span>
                        </label>
                    </div>
                    <div class="mb-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="itemIsNew" class="form-checkbox h-5 w-5 text-primary">
                            <span class="ml-2 text-gray-700">标记为新品</span>
                        </label>
                    </div>
                    <div class="flex justify-end mt-6">
                        <button type="button" id="cancelEditItemBtn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors mr-2">
                            取消
                        </button>
                        <button type="submit" class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow hover:shadow-md">
                            保存
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 商家管理界面 -->
    <div id="adminPanel" class="fixed inset-0 bg-white z-50 transform translate-x-full transition-transform duration-300">
        <div class="h-full flex flex-col">
            <div class="p-4 border-b flex justify-between items-center bg-secondary text-white">
                <h3 class="text-xl font-bold">商家管理中心</h3>
                <div class="flex items-center">
                    <button id="switchToCustomerBtn" class="text-white hover:text-gray-200 mr-4">
                        <i class="fa fa-user"></i> 顾客界面
                    </button>
                    <button id="logoutBtn" class="text-white hover:text-gray-200">
                        <i class="fa fa-sign-out"></i>
                    </button>
                </div>
            </div>
            
            <div class="border-b">
                <div class="flex overflow-x-auto">
                    <button class="admin-tab-btn py-3 px-6 border-b-2 border-primary text-primary font-medium" data-tab="orders">
                        订单管理
                    </button>
                    <button class="admin-tab-btn py-3 px-6 border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-tab="menu">
                        菜品管理
                    </button>
                </div>
            </div>
            
            <div class="flex-1 overflow-y-auto p-4">
                <!-- 订单管理标签内容 -->
                <div class="admin-tab-content" id="ordersTab">
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold mb-3 flex items-center">
                            待处理订单
                            <span id="pendingOrdersCount" class="ml-2 bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full">0</span>
                        </h4>
                        <div id="pendingOrders" class="space-y-4">
                            <!-- 待处理订单会通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold mb-3">已完成订单</h4>
                        <div id="completedOrders" class="space-y-4">
                            <!-- 已完成订单会通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
                
                <!-- 菜品管理标签内容 -->
                <div class="admin-tab-content hidden" id="menuTab">
                    <div class="flex justify-between items-center mb-6">
                        <h4 class="text-lg font-semibold">菜品管理</h4>
                        <button id="addNewItemBtn" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors shadow hover:shadow-md">
                            <i class="fa fa-plus mr-1"></i> 添加新菜品
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div id="menuItemsList">
                            <!-- 菜品列表会通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 隐藏的商家入口（左下角小按钮） -->
    <button id="adminEntry" class="fixed bottom-4 left-4 bg-secondary text-white p-3 rounded-full shadow-lg hover:bg-secondary/90 transition-colors z-40 transform hover:scale-110">
        <i class="fa fa-lock"></i>
    </button>
    
    <script>
        // 全局变量
        let currentSlide = 0;
        let cart = [];
        let orders = [];
        let menuItems = []; // 从本地存储加载
        const ADMIN_PASSWORD = 'admin123'; // 商家管理密码
        const NOTIFICATION_SOUND = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3');
        const NEW_ORDER_SOUND = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-iphone-notification-alarm-1030.mp3');
        const ORDER_CONFIRMED_SOUND = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3');
        
        // DOM 元素
        const elements = {
            carousel: {
                container: document.querySelector('.carousel-container'),
                slides: document.querySelectorAll('.carousel-slide'),
                controls: document.querySelectorAll('.carousel-control'),
                indicators: document.querySelectorAll('.carousel-indicator')
            },
            mobileMenuBtn: document.getElementById('mobileMenuBtn'),
            mobileMenu: document.getElementById('mobileMenu'),
            cartBtn: document.getElementById('cartBtn'),
            closeCartBtn: document.getElementById('closeCartBtn'),
            cartSidebar: document.getElementById('cartSidebar'),
            cartItems: document.getElementById('cartItems'),
            cartCount: document.getElementById('cartCount'),
            cartTotal: document.getElementById('cartTotal'),
            checkoutBtn: document.getElementById('checkoutBtn'),
            checkoutModal: document.getElementById('checkoutModal'),
            checkoutModalContent: document.getElementById('checkoutModalContent'),
            cancelCheckoutBtn: document.getElementById('cancelCheckoutBtn'),
            checkoutForm: document.getElementById('checkoutForm'),
            orderSuccessModal: document.getElementById('orderSuccessModal'),
            successModalContent: document.getElementById('successModalContent'),
            closeSuccessModal: document.getElementById('closeSuccessModal'),
            orderNumber: document.getElementById('orderNumber'),
            menuContainer: document.querySelector('#menu .grid'),
            categoryBtns: document.querySelectorAll('.category-btn'),
            adminEntry: document.getElementById('adminEntry'),
            adminLoginModal: document.getElementById('adminLoginModal'),
            loginModalContent: document.getElementById('loginModalContent'),
            adminLoginForm: document.getElementById('adminLoginForm'),
            cancelLoginBtn: document.getElementById('cancelLoginBtn'),
            loginError: document.getElementById('loginError'),
            adminPanel: document.getElementById('adminPanel'),
            switchToCustomerBtn: document.getElementById('switchToCustomerBtn'),
            logoutBtn: document.getElementById('logoutBtn'),
            pendingOrders: document.getElementById('pendingOrders'),
            pendingOrdersCount: document.getElementById('pendingOrdersCount'),
            completedOrders: document.getElementById('completedOrders'),
            adminTabBtns: document.querySelectorAll('.admin-tab-btn'),
            adminTabContents: document.querySelectorAll('.admin-tab-content'),
            menuTab: document.getElementById('menuTab'),
            ordersTab: document.getElementById('ordersTab'),
            menuItemsList: document.getElementById('menuItemsList'),
            addNewItemBtn: document.getElementById('addNewItemBtn'),
            editItemModal: document.getElementById('editItemModal'),
            editModalContent: document.getElementById('editModalContent'),
            editItemModalTitle: document.getElementById('editItemModalTitle'),
            editItemForm: document.getElementById('editItemForm'),
            cancelEditItemBtn: document.getElementById('cancelEditItemBtn'),
            itemId: document.getElementById('itemId'),
            itemName: document.getElementById('itemName'),
            itemDescription: document.getElementById('itemDescription'),
            itemPrice: document.getElementById('itemPrice'),
            itemImage: document.getElementById('itemImage'),
            itemCategory: document.getElementById('itemCategory'),
            itemActive: document.getElementById('itemActive'),
            itemIsNew: document.getElementById('itemIsNew'),
            newArrivalsContainer: document.getElementById('newArrivalsContainer'),
            notificationArea: document.getElementById('notificationArea')
        };
        
        // 初始化
        function init() {
            // 从本地存储加载数据
            loadFromLocalStorage();
            
            // 如果没有菜品数据，初始化默认菜品
            if (menuItems.length === 0) {
                initDefaultMenuItems();
                saveToLocalStorage();
            }
            
            // 渲染菜单
            renderMenuItems();
            
            // 渲染新品区域
            renderNewArrivals();
            
            // 更新购物车
            updateCart();
            
            // 渲染订单
            renderOrders();
            
            // 渲染商家菜单管理列表
            renderAdminMenuItems();
            
            // 设置轮播
            setupCarousel();
            
            // 添加事件监听器
            addEventListeners();
        }
        
        // 初始化默认菜品
        function initDefaultMenuItems() {
            menuItems = [
                {
                    id: 1,
                    name: "经典牛肉汉堡",
                    description: "鲜嫩牛肉饼搭配特制酱料和新鲜蔬菜",
                    price: 28,
                    image: "https://picsum.photos/id/1/300/200",
                    category: "burgers",
                    active: true,
                    isNew: false
                },
                {
                    id: 2,
                    name: "芝士汉堡",
                    description: "浓郁芝士与牛肉的完美结合",
                    price: 32,
                    image: "https://picsum.photos/id/2/300/200",
                    category: "burgers",
                    active: true,
                    isNew: false
                },
                {
                    id: 3,
                    name: "培根汉堡",
                    description: "香脆培根搭配多汁牛肉饼",
                    price: 35,
                    image: "https://picsum.photos/id/3/300/200",
                    category: "burgers",
                    active: true,
                    isNew: false
                },
                {
                    id: 4,
                    name: "玛格丽特披萨",
                    description: "传统意式披萨，番茄与 mozzarella 芝士",
                    price: 58,
                    image: "https://picsum.photos/id/4/300/200",
                    category: "pizza",
                    active: true,
                    isNew: false
                },
                {
                    id: 5,
                    name: "至尊披萨",
                    description: "多种肉类与蔬菜的丰富组合",
                    price: 78,
                    image: "https://picsum.photos/id/5/300/200",
                    category: "pizza",
                    active: true,
                    isNew: false
                },
                {
                    id: 6,
                    name: "素食披萨",
                    description: "新鲜蔬菜与特制酱料的健康选择",
                    price: 52,
                    image: "https://picsum.photos/id/6/300/200",
                    category: "pizza",
                    active: true,
                    isNew: false
                },
                {
                    id: 7,
                    name: "凯撒沙拉",
                    description: "罗马生菜、凯撒酱、面包丁和帕玛森芝士",
                    price: 36,
                    image: "https://picsum.photos/id/7/300/200",
                    category: "salads",
                    active: true,
                    isNew: false
                },
                {
                    id: 8,
                    name: "水果沙拉",
                    description: "时令水果混合，健康清爽",
                    price: 28,
                    image: "https://picsum.photos/id/8/300/200",
                    category: "salads",
                    active: true,
                    isNew: false
                },
                {
                    id: 9,
                    name: "可乐",
                    description: "冰镇碳酸饮料",
                    price: 8,
                    image: "https://picsum.photos/id/9/300/200",
                    category: "drinks",
                    active: true,
                    isNew: false
                },
                {
                    id: 10,
                    name: "鲜榨橙汁",
                    description: "100%纯鲜榨，无添加",
                    price: 12,
                    image: "https://picsum.photos/id/10/300/200",
                    category: "drinks",
                    active: true,
                    isNew: true
                },
                {
                    id: 11,
                    name: "珍珠奶茶",
                    description: "经典珍珠奶茶，口感丝滑",
                    price: 15,
                    image: "https://picsum.photos/id/11/300/200",
                    category: "drinks",
                    active: true,
                    isNew: false
                },
                {
                    id: 12,
                    name: "香辣炸鸡汉堡",
                    description: "香辣炸鸡搭配清爽生菜，口味独特",
                    price: 36,
                    image: "https://picsum.photos/id/12/300/200",
                    category: "burgers",
                    active: true,
                    isNew: true
                }
            ];
        }
        
        // 从本地存储加载数据
        function loadFromLocalStorage() {
            const savedCart = localStorage.getItem('foodOrderCart');
            const savedOrders = localStorage.getItem('foodOrders');
            const savedMenuItems = localStorage.getItem('foodMenuItems');
            
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
            
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
            
            if (savedMenuItems) {
                menuItems = JSON.parse(savedMenuItems);
            }
        }
        
        // 保存数据到本地存储
        function saveToLocalStorage() {
            localStorage.setItem('foodOrderCart', JSON.stringify(cart));
            localStorage.setItem('foodOrders', JSON.stringify(orders));
            localStorage.setItem('foodMenuItems', JSON.stringify(menuItems));
            
            // 触发storage事件，以便在同一浏览器的其他标签页中同步数据
            const event = new Event('storage');
            window.dispatchEvent(event);
        }
        
        // 渲染菜单项（顾客界面）- 优化视觉效果
        function renderMenuItems(category = 'all') {
            elements.menuContainer.innerHTML = '';
            
            const filteredItems = category === 'all' 
                ? menuItems.filter(item => item.active)
                : menuItems.filter(item => item.category === category && item.active);
            
            if (filteredItems.length === 0) {
                elements.menuContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-cutlery text-5xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">该分类下暂无菜品</p>
                    </div>
                `;
                return;
            }
            
            filteredItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-white rounded-lg shadow-md overflow-hidden card-hover menu-item-bg group';
                itemElement.style.backgroundImage = `url(${item.image})`;
                
                // 为新品添加特殊标记
                const newBadge = item.isNew ? `<div class="badge-new">新品</div>` : '';
                
                itemElement.innerHTML = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        ${newBadge}
                    </div>
                    <div class="p-4 menu-item-content">
                        <h3 class="font-bold text-lg mb-1 text-secondary group-hover:text-primary transition-colors">${item.name}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${item.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-primary font-bold text-xl">¥${item.price}</span>
                            <button class="add-to-cart-btn bg-primary text-white p-2 rounded-full hover:bg-primary/90 transition-all shadow-md hover:shadow-lg transform hover:scale-110" data-id="${item.id}">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                elements.menuContainer.appendChild(itemElement);
            });
            
            // 为添加到购物车按钮添加事件监听器
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    addToCart(itemId);
                });
            });
        }
        
        // 渲染新品区域
        function renderNewArrivals() {
            elements.newArrivalsContainer.innerHTML = '';
            
            // 获取所有标记为新品的菜品
            const newItems = menuItems.filter(item => item.active && item.isNew);
            
            if (newItems.length === 0) {
                elements.newArrivalsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-gift text-5xl text-white/30 mb-4"></i>
                        <p class="text-white/70">暂无新品，敬请期待</p>
                    </div>
                `;
                return;
            }
            
            // 最多显示3个新品
            const displayItems = newItems.slice(0, 3);
            
            displayItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'bg-white/10 backdrop-blur-sm rounded-lg overflow-hidden shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl';
                itemElement.innerHTML = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                        <div class="badge-new">新品</div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1 text-white">${item.name}</h3>
                        <p class="text-white/80 text-sm mb-3 line-clamp-2">${item.description}</p>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-white font-bold text-xl">¥${item.price}</span>
                                <span class="text-yellow-300 text-sm ml-2 line-through">¥${(item.price / 0.8).toFixed(2)}</span>
                            </div>
                            <button class="add-to-cart-btn bg-primary text-white p-2 rounded-full hover:bg-primary/90 transition-all shadow-md hover:shadow-lg" data-id="${item.id}">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                elements.newArrivalsContainer.appendChild(itemElement);
            });
            
            // 为添加到购物车按钮添加事件监听器
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    addToCart(itemId);
                });
            });
        }
        
        // 渲染商家菜单管理列表
        function renderAdminMenuItems() {
            elements.menuItemsList.innerHTML = '';
            
            if (menuItems.length === 0) {
                elements.menuItemsList.innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-gray-500">暂无菜品，请添加新菜品</p>
                    </div>
                `;
                return;
            }
            
            // 按分类排序
            const sortedItems = [...menuItems].sort((a, b) => {
                if (a.category < b.category) return -1;
                if (a.category > b.category) return 1;
                return a.name.localeCompare(b.name);
            });
            
            sortedItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = `flex items-center justify-between p-4 border rounded-lg mb-3 ${item.active ? 'bg-white' : 'bg-gray-50 opacity-70'}`;
                
                // 新品标记
                const newBadge = item.isNew ? `<span class="ml-2 bg-pink-100 text-pink-800 text-xs font-medium px-2 py-0.5 rounded">新品</span>` : '';
                
                itemElement.innerHTML = `
                    <div class="flex items-center">
                        <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-cover rounded mr-3">
                        <div>
                            <h4 class="font-semibold">${item.name}${newBadge}</h4>
                            <p class="text-sm text-gray-500">${getCategoryName(item.category)} · ¥${item.price}</p>
                            ${!item.active ? '<p class="text-xs text-red-500">已下架</p>' : ''}
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="edit-item-btn text-blue-500 hover:text-blue-700" data-id="${item.id}">
                            <i class="fa fa-pencil"></i>
                        </button>
                        <button class="toggle-item-status-btn ${item.active ? 'text-yellow-500 hover:text-yellow-700' : 'text-green-500 hover:text-green-700'}" data-id="${item.id}">
                            <i class="${item.active ? 'fa fa-eye-slash' : 'fa fa-eye'}"></i>
                        </button>
                        <button class="delete-item-btn text-red-500 hover:text-red-700" data-id="${item.id}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                `;
                elements.menuItemsList.appendChild(itemElement);
            });
            
            // 添加事件监听器
            document.querySelectorAll('.edit-item-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    openEditItemModal(itemId);
                });
            });
            
            document.querySelectorAll('.toggle-item-status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    toggleItemStatus(itemId);
                });
            });
            
            document.querySelectorAll('.delete-item-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    if (confirm('确定要删除这个菜品吗？')) {
                        deleteItem(itemId);
                    }
                });
            });
        }
        
        // 获取分类中文名称
        function getCategoryName(category) {
            const categories = {
                'burgers': '汉堡',
                'pizza': '披萨',
                'salads': '沙拉',
                'drinks': '饮品'
            };
            return categories[category] || category;
        }
        
        // 打开编辑菜品模态框
        function openEditItemModal(itemId) {
            if (itemId) {
                // 编辑现有菜品
                const item = menuItems.find(item => item.id === itemId);
                if (item) {
                    elements.editItemModalTitle.textContent = '编辑菜品';
                    elements.itemId.value = item.id;
                    elements.itemName.value = item.name;
                    elements.itemDescription.value = item.description;
                    elements.itemPrice.value = item.price;
                    elements.itemImage.value = item.image;
                    elements.itemCategory.value = item.category;
                    elements.itemActive.checked = item.active;
                    elements.itemIsNew.checked = item.isNew || false;
                    
                    // 显示模态框并添加动画
                    elements.editItemModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                    setTimeout(() => {
                        elements.editModalContent.classList.remove('scale-95', 'opacity-0');
                        elements.editModalContent.classList.add('scale-100', 'opacity-100');
                    }, 10);
                }
            } else {
                // 添加新菜品
                elements.editItemModalTitle.textContent = '添加新菜品';
                elements.itemId.value = '';
                elements.itemName.value = '';
                elements.itemDescription.value = '';
                elements.itemPrice.value = '';
                elements.itemImage.value = '';
                elements.itemCategory.value = 'burgers';
                elements.itemActive.checked = true;
                elements.itemIsNew.checked = false;
                
                // 显示模态框并添加动画
                elements.editItemModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    elements.editModalContent.classList.remove('scale-95', 'opacity-0');
                    elements.editModalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            }
        }
        
        // 保存菜品信息
        function saveItem() {
            const itemId = elements.itemId.value ? parseInt(elements.itemId.value) : null;
            const name = elements.itemName.value;
            const description = elements.itemDescription.value;
            const price = parseFloat(elements.itemPrice.value);
            const image = elements.itemImage.value;
            const category = elements.itemCategory.value;
            const active = elements.itemActive.checked;
            const isNew = elements.itemIsNew.checked;
            
            if (!name || !description || !price || !image) {
                alert('请填写所有必填字段');
                return;
            }
            
            if (itemId) {
                // 更新现有菜品
                const index = menuItems.findIndex(item => item.id === itemId);
                if (index !== -1) {
                    menuItems[index] = {
                        ...menuItems[index],
                        name,
                        description,
                        price,
                        image,
                        category,
                        active,
                        isNew
                    };
                }
            } else {
                // 添加新菜品
                const newId = menuItems.length > 0 
                    ? Math.max(...menuItems.map(item => item.id)) + 1 
                    : 1;
                
                menuItems.push({
                    id: newId,
                    name,
                    description,
                    price,
                    image,
                    category,
                    active,
                    isNew
                });
            }
            
            saveToLocalStorage();
            renderAdminMenuItems();
            renderMenuItems(); // 更新顾客界面菜单
            renderNewArrivals(); // 更新新品区域
            
            // 关闭模态框
            elements.editModalContent.classList.remove('scale-100', 'opacity-100');
            elements.editModalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                elements.editItemModal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }
        
        // 切换菜品上下架状态
        function toggleItemStatus(itemId) {
            const item = menuItems.find(item => item.id === itemId);
            if (item) {
                item.active = !item.active;
                saveToLocalStorage();
                renderAdminMenuItems();
                renderMenuItems(); // 更新顾客界面菜单
                renderNewArrivals(); // 更新新品区域
            }
        }
        
        // 删除菜品
        function deleteItem(itemId) {
            const index = menuItems.findIndex(item => item.id === itemId);
            if (index !== -1) {
                menuItems.splice(index, 1);
                saveToLocalStorage();
                renderAdminMenuItems();
                renderMenuItems(); // 更新顾客界面菜单
                renderNewArrivals(); // 更新新品区域
            }
        }
        
        // 添加商品到购物车
        function addToCart(itemId) {
            const item = menuItems.find(menuItem => menuItem.id === itemId && menuItem.active);
            if (!item) return;
            
            const existingItem = cart.find(cartItem => cartItem.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...item,
                    quantity: 1
                });
            }
            
            saveToLocalStorage();
            updateCart();
            
            // 显示添加成功的通知
            showNotification('已添加到购物车', 'success');
        }
        
        // 从购物车移除商品
        function removeFromCart(itemId) {
            const index = cart.findIndex(item => item.id === itemId);
            if (index !== -1) {
                if (cart[index].quantity > 1) {
                    cart[index].quantity -= 1;
                } else {
                    cart.splice(index, 1);
                }
                
                saveToLocalStorage();
                updateCart();
            }
        }
        
        // 清空购物车
        function clearCart() {
            cart = [];
            saveToLocalStorage();
            updateCart();
        }
        
        // 更新购物车显示
        function updateCart() {
            // 更新购物车数量
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            elements.cartCount.textContent = totalItems;
            
            // 为购物车数量添加动画效果
            if (totalItems > 0) {
                elements.cartCount.classList.add('cart-badge');
                setTimeout(() => {
                    elements.cartCount.classList.remove('cart-badge');
                }, 300);
            }
            
            // 更新购物车内容
            if (cart.length === 0) {
                elements.cartItems.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fa fa-shopping-cart text-4xl mb-2 opacity-30"></i>
                        <p>购物车是空的</p>
                    </div>
                `;
                elements.checkoutBtn.disabled = true;
                elements.cartTotal.textContent = '¥0.00';
                return;
            }
            
            elements.checkoutBtn.disabled = false;
            
            // 计算总价
            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            elements.cartTotal.textContent = `¥${totalPrice.toFixed(2)}`;
            
            // 渲染购物车项目
            elements.cartItems.innerHTML = '';
            cart.forEach(item => {
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'flex items-center py-3 border-b last:border-0';
                cartItemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded mr-3">
                    <div class="flex-1">
                        <h4 class="font-semibold">${item.name}</h4>
                        <p class="text-primary font-bold">¥${item.price}</p>
                    </div>
                    <div class="flex items-center">
                        <button class="cart-item-remove bg-gray-100 w-6 h-6 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200" data-id="${item.id}">
                            <i class="fa fa-minus text-xs"></i>
                        </button>
                        <span class="mx-3">${item.quantity}</span>
                        <button class="cart-item-add bg-gray-100 w-6 h-6 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200" data-id="${item.id}">
                            <i class="fa fa-plus text-xs"></i>
                        </button>
                    </div>
                `;
                elements.cartItems.appendChild(cartItemElement);
            });
            
            // 为购物车项目按钮添加事件监听器
            document.querySelectorAll('.cart-item-add').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    addToCart(itemId);
                });
            });
            
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.id);
                    removeFromCart(itemId);
                });
            });
        }
        
        // 创建订单
        function createOrder(customerInfo) {
            const orderId = 'ORD-' + Date.now();
            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            
            const newOrder = {
                id: orderId,
                customer: customerInfo,
                items: cart,
                total: totalPrice,
                status: 'pending', // pending 或 confirmed 或 completed
                createdAt: new Date().toISOString()
            };
            
            orders.push(newOrder);
            saveToLocalStorage();
            renderOrders();
            
            // 清空购物车
            clearCart();
            
            return orderId;
        }
        
        // 确认订单
        function confirmOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = 'confirmed';
                saveToLocalStorage();
                renderOrders();
                
                // 播放确认提示音
                ORDER_CONFIRMED_SOUND.play().catch(e => console.log('无法播放提示音:', e));
                
                // 显示通知
                showNotification('订单已确认', 'success', true);
            }
        }
        
        // 完成订单
        function completeOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = 'completed';
                saveToLocalStorage();
                renderOrders();
            }
        }
        
        // 渲染订单
        function renderOrders() {
            // 清空订单列表
            elements.pendingOrders.innerHTML = '';
            elements.completedOrders.innerHTML = '';
            
            // 按日期排序，最新的在前
            const sortedOrders = [...orders].sort((a, b) => 
                new Date(b.createdAt) - new Date(a.createdAt)
            );
            
            // 分离待处理、已确认和已完成订单
            const pendingOrders = sortedOrders.filter(order => order.status === 'pending');
            const confirmedOrders = sortedOrders.filter(order => order.status === 'confirmed');
            const completedOrders = sortedOrders.filter(order => order.status === 'completed');
            
            // 更新待处理订单计数
            elements.pendingOrdersCount.textContent = pendingOrders.length;
            
            // 渲染待处理订单
            if (pendingOrders.length === 0) {
                elements.pendingOrders.innerHTML = '<p class="text-gray-500 text-center py-4">暂无待处理订单</p>';
            } else {
                pendingOrders.forEach(order => {
                    elements.pendingOrders.appendChild(createOrderElement(order, 'pending'));
                });
            }
            
            // 渲染已确认订单（显示在待处理区域下方）
            if (confirmedOrders.length > 0) {
                confirmedOrders.forEach(order => {
                    elements.pendingOrders.appendChild(createOrderElement(order, 'confirmed'));
                });
            }
            
            // 渲染已完成订单
            if (completedOrders.length === 0) {
                elements.completedOrders.innerHTML = '<p class="text-gray-500 text-center py-4">暂无已完成订单</p>';
            } else {
                completedOrders.forEach(order => {
                    elements.completedOrders.appendChild(createOrderElement(order, 'completed'));
                });
            }
        }
        
        // 创建订单元素
        function createOrderElement(order, status) {
            const orderElement = document.createElement('div');
            
            // 根据订单状态设置不同样式
            let statusClass = '';
            let statusText = '';
            
            switch(status) {
                case 'pending':
                    statusClass = 'border-l-4 border-yellow-500';
                    statusText = '待确认';
                    break;
                case 'confirmed':
                    statusClass = 'border-l-4 border-blue-500';
                    statusText = '已确认';
                    break;
                case 'completed':
                    statusClass = 'border-l-4 border-green-500';
                    statusText = '已完成';
                    break;
            }
            
            orderElement.className = `bg-white rounded-lg shadow p-4 ${statusClass} transition-all hover:shadow-md`;
            
            // 格式化日期
            const date = new Date(order.createdAt);
            const formattedDate = date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // 构建订单项HTML
            let itemsHtml = '';
            order.items.forEach(item => {
                itemsHtml += `
                    <div class="flex justify-between py-1">
                        <span>${item.name} x ${item.quantity}</span>
                        <span>¥${(item.price * item.quantity).toFixed(2)}</span>
                    </div>
                `;
            });
            
            // 根据状态显示不同按钮
            let actionButtons = '';
            if (status === 'pending') {
                actionButtons = `
                    <div class="mt-3 text-right">
                        <button class="confirm-order-btn bg-blue-500 text-white px-4 py-1 rounded text-sm hover:bg-blue-600 transition-colors mr-2" data-id="${order.id}">
                            确认接单
                        </button>
                        <button class="complete-order-btn bg-green-500 text-white px-4 py-1 rounded text-sm hover:bg-green-600 transition-colors" data-id="${order.id}">
                            标记为已完成
                        </button>
                    </div>
                `;
            } else if (status === 'confirmed') {
                actionButtons = `
                    <div class="mt-3 text-right">
                        <button class="complete-order-btn bg-green-500 text-white px-4 py-1 rounded text-sm hover:bg-green-600 transition-colors" data-id="${order.id}">
                            标记为已完成
                        </button>
                    </div>
                `;
            }
            
            orderElement.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h5 class="font-bold">订单 #${order.id}</h5>
                        <p class="text-sm text-gray-500">${formattedDate}</p>
                    </div>
                    <span class="px-2 py-1 rounded text-sm ${
                        status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 
                        status === 'confirmed' ? 'bg-blue-100 text-blue-800' : 
                        'bg-green-100 text-green-800'
                    }">
                        ${statusText}
                    </span>
                </div>
                
                <div class="mb-3">
                    <h6 class="font-semibold mb-1">顾客信息</h6>
                    <p class="text-sm">${order.customer.name}</p>
                    <p class="text-sm">${order.customer.phone}</p>
                    <p class="text-sm">${order.customer.address}</p>
                    ${order.customer.notes ? `<p class="text-sm mt-1"><strong>备注:</strong> ${order.customer.notes}</p>` : ''}
                </div>
                
                <div class="mb-3">
                    <h6 class="font-semibold mb-1">订单内容</h6>
                    <div class="text-sm border-t pt-2">
                        ${itemsHtml}
                    </div>
                </div>
                
                <div class="flex justify-between items-center font-bold">
                    <span>总计:</span>
                    <span class="text-primary">¥${order.total.toFixed(2)}</span>
                </div>
                
                ${actionButtons}
            `;
            
            // 添加按钮事件
            if (status === 'pending') {
                orderElement.querySelector('.confirm-order-btn').addEventListener('click', (e) => {
                    const orderId = e.currentTarget.dataset.id;
                    confirmOrder(orderId);
                });
            }
            
            if (status === 'pending' || status === 'confirmed') {
                orderElement.querySelector('.complete-order-btn').addEventListener('click', (e) => {
                    const orderId = e.currentTarget.dataset.id;
                    completeOrder(orderId);
                });
            }
            
            return orderElement;
        }
        
        // 设置轮播
        function setupCarousel() {
            const slideCount = elements.carousel.slides.length;
            
            // 设置轮播自动播放
            let carouselInterval = setInterval(nextSlide, 5000);
            
            // 轮播控制按钮事件
            elements.carousel.controls[0].addEventListener('click', () => {
                clearInterval(carouselInterval);
                prevSlide();
                carouselInterval = setInterval(nextSlide, 5000);
            });
            
            elements.carousel.controls[1].addEventListener('click', () => {
                clearInterval(carouselInterval);
                nextSlide();
                carouselInterval = setInterval(nextSlide, 5000);
            });
            
            // 轮播指示器事件
            elements.carousel.indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    clearInterval(carouselInterval);
                    goToSlide(index);
                    carouselInterval = setInterval(nextSlide, 5000);
                });
            });
        }
        
        // 轮播切换到下一张
        function nextSlide() {
            const slideCount = elements.carousel.slides.length;
            currentSlide = (currentSlide + 1) % slideCount;
            updateCarousel();
        }
        
        // 轮播切换到上一张
        function prevSlide() {
            const slideCount = elements.carousel.slides.length;
            currentSlide = (currentSlide - 1 + slideCount) % slideCount;
            updateCarousel();
        }
        
        // 轮播切换到指定张
        function goToSlide(index) {
            currentSlide = index;
            updateCarousel();
        }
        
        // 更新轮播显示
        function updateCarousel() {
            const slideWidth = 100; // 百分比
            elements.carousel.container.style.transform = `translateX(-${currentSlide * slideWidth}%)`;
            
            // 更新指示器状态
            elements.carousel.indicators.forEach((indicator, index) => {
                if (index === currentSlide) {
                    indicator.classList.add('bg-white');
                    indicator.classList.remove('bg-white/50');
                } else {
                    indicator.classList.remove('bg-white');
                    indicator.classList.add('bg-white/50');
                }
            });
        }
        
        // 显示通知
        function showNotification(message, type = 'info', isAdmin = false) {
            // 只在对应的界面显示通知
            if (isAdmin && elements.adminPanel.classList.contains('translate-x-full')) {
                return;
            }
            if (!isAdmin && !elements.adminPanel.classList.contains('translate-x-full')) {
                return;
            }
            
            const notification = document.createElement('div');
            
            // 设置通知类型样式
            let bgColor, icon;
            switch(type) {
                case 'success':
                    bgColor = 'bg-green-500';
                    icon = 'fa-check-circle';
                    break;
                case 'error':
                    bgColor = 'bg-red-500';
                    icon = 'fa-exclamation-circle';
                    break;
                case 'warning':
                    bgColor = 'bg-yellow-500';
                    icon = 'fa-exclamation-triangle';
                    break;
                default:
                    bgColor = 'bg-blue-500';
                    icon = 'fa-info-circle';
            }
            
            notification.className = `notification ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg flex items-center`;
            notification.innerHTML = `
                <i class="fa ${icon} mr-2"></i>
                <span>${message}</span>
            `;
            
            elements.notificationArea.appendChild(notification);
            
            // 3秒后移除通知
            setTimeout(() => {
                notification.remove();
            }, 3500);
        }
        
        // 检查是否有新订单并播放提示音
        function checkForNewOrders() {
            // 只有在商家面板打开时才检查新订单
            if (elements.adminPanel.classList.contains('translate-x-full')) {
                return;
            }
            
            // 检查是否有未处理的新订单
            const pendingOrders = orders.filter(order => order.status === 'pending');
            if (pendingOrders.length > 0) {
                // 播放提示音
                NEW_ORDER_SOUND.play().catch(e => console.log('无法播放提示音:', e));
                
                // 显示通知
                showNotification(`有${pendingOrders.length}个新订单需要处理`, 'warning', true);
                
                // 视觉提示 - 闪烁订单标签
                elements.adminTabBtns[0].classList.add('animate-pulse');
                setTimeout(() => {
                    elements.adminTabBtns[0].classList.remove('animate-pulse');
                }, 2000);
            }
        }
        
        // 检查是否有订单状态更新（顾客端）
        function checkForOrderUpdates() {
            // 只有在顾客界面才检查
            if (!elements.adminPanel.classList.contains('translate-x-full')) {
                return;
            }
            
            // 检查是否有最近被确认的订单
            const recentConfirmedOrders = orders.filter(order => 
                order.status === 'confirmed' && 
                new Date(order.updatedAt || order.createdAt) > new Date(Date.now() - 5 * 60 * 1000) // 5分钟内
            );
            
            if (recentConfirmedOrders.length > 0) {
                // 播放提示音
                ORDER_CONFIRMED_SOUND.play().catch(e => console.log('无法播放提示音:', e));
                
                // 显示通知
                showNotification('您的订单已被确认，正在准备中', 'success');
            }
        }
        
        // 切换商家管理标签
        function switchAdminTab(tabId) {
            // 更新标签按钮样式
            elements.adminTabBtns.forEach(btn => {
                if (btn.dataset.tab === tabId) {
                    btn.classList.add('border-primary', 'text-primary');
                    btn.classList.remove('border-transparent', 'text-gray-500');
                } else {
                    btn.classList.remove('border-primary', 'text-primary');
                    btn.classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700');
                }
            });
            
            // 显示对应标签内容
            elements.adminTabContents.forEach(content => {
                if (content.id === `${tabId}Tab`) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        }
        
        // 添加事件监听器
        function addEventListeners() {
            // 移动端菜单切换
            elements.mobileMenuBtn.addEventListener('click', () => {
                elements.mobileMenu.classList.toggle('hidden');
            });
            
            // 购物车侧边栏切换
            elements.cartBtn.addEventListener('click', () => {
                elements.cartSidebar.classList.remove('translate-x-full');
                document.body.style.overflow = 'hidden';
            });
            
            elements.closeCartBtn.addEventListener('click', () => {
                elements.cartSidebar.classList.add('translate-x-full');
                document.body.style.overflow = 'auto';
            });
            
            // 结账按钮
            elements.checkoutBtn.addEventListener('click', () => {
                elements.checkoutModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    elements.checkoutModalContent.classList.remove('scale-95', 'opacity-0');
                    elements.checkoutModalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            });
            
            // 取消结账
            elements.cancelCheckoutBtn.addEventListener('click', () => {
                elements.checkoutModalContent.classList.remove('scale-100', 'opacity-100');
                elements.checkoutModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    elements.checkoutModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            });
            
            // 提交订单
            elements.checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const customerInfo = {
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                    notes: document.getElementById('notes').value
                };
                
                const orderId = createOrder(customerInfo);
                
                // 重置表单并隐藏模态框
                elements.checkoutForm.reset();
                elements.checkoutModalContent.classList.remove('scale-100', 'opacity-100');
                elements.checkoutModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    elements.checkoutModal.classList.add('hidden');
                    
                    // 显示成功消息
                    elements.orderNumber.textContent = orderId;
                    elements.orderSuccessModal.classList.remove('hidden');
                    setTimeout(() => {
                        elements.successModalContent.classList.remove('scale-95', 'opacity-0');
                        elements.successModalContent.classList.add('scale-100', 'opacity-100');
                    }, 10);
                    
                    document.body.style.overflow = 'hidden';
                }, 300);
                
                // 检查新订单并播放提示音
                checkForNewOrders();
            });
            
            // 关闭成功模态框
            elements.closeSuccessModal.addEventListener('click', () => {
                elements.successModalContent.classList.remove('scale-100', 'opacity-100');
                elements.successModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    elements.orderSuccessModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            });
            
            // 菜单分类切换
            elements.categoryBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // 更新按钮样式
                    elements.categoryBtns.forEach(b => {
                        b.classList.remove('bg-primary', 'text-white');
                        b.classList.add('bg-white', 'text-secondary', 'hover:bg-gray-100');
                    });
                    
                    e.currentTarget.classList.remove('bg-white', 'text-secondary', 'hover:bg-gray-100');
                    e.currentTarget.classList.add('bg-primary', 'text-white');
                    
                    // 渲染对应分类的菜单
                    const category = e.currentTarget.dataset.category;
                    renderMenuItems(category);
                });
            });
            
            // 商家入口点击
            elements.adminEntry.addEventListener('click', () => {
                elements.adminLoginModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    elements.loginModalContent.classList.remove('scale-95', 'opacity-0');
                    elements.loginModalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            });
            
            // 取消商家登录
            elements.cancelLoginBtn.addEventListener('click', () => {
                elements.loginModalContent.classList.remove('scale-100', 'opacity-100');
                elements.loginModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    elements.adminLoginModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                    elements.loginError.classList.add('hidden');
                    elements.adminLoginForm.reset();
                }, 300);
            });
            
            // 商家登录表单提交
            elements.adminLoginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const password = document.getElementById('adminPassword').value;
                
                if (password === ADMIN_PASSWORD) {
                    elements.loginModalContent.classList.remove('scale-100', 'opacity-100');
                    elements.loginModalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        elements.adminLoginModal.classList.add('hidden');
                        elements.adminPanel.classList.remove('translate-x-full');
                        document.body.style.overflow = 'auto';
                        elements.loginError.classList.add('hidden');
                        elements.adminLoginForm.reset();
                        
                        // 检查新订单并播放提示音
                        checkForNewOrders();
                    }, 300);
                } else {
                    elements.loginError.classList.remove('hidden');
                    // 添加抖动动画效果
                    elements.loginModalContent.classList.add('animate-shake');
                    setTimeout(() => {
                        elements.loginModalContent.classList.remove('animate-shake');
                    }, 500);
                }
            });
            
            // 切换到顾客界面
            elements.switchToCustomerBtn.addEventListener('click', () => {
                elements.adminPanel.classList.add('translate-x-full');
            });
            
            // 商家登出
            elements.logoutBtn.addEventListener('click', () => {
                elements.adminPanel.classList.add('translate-x-full');
            });
            
            // 商家管理标签切换
            elements.adminTabBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const tabId = e.currentTarget.dataset.tab;
                    switchAdminTab(tabId);
                });
            });
            
            // 添加新菜品按钮
            elements.addNewItemBtn.addEventListener('click', () => {
                openEditItemModal(null);
            });
            
            // 取消编辑菜品
            elements.cancelEditItemBtn.addEventListener('click', () => {
                elements.editModalContent.classList.remove('scale-100', 'opacity-100');
                elements.editModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    elements.editItemModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            });
            
            // 保存菜品
            elements.editItemForm.addEventListener('submit', (e) => {
                e.preventDefault();
                saveItem();
            });
            
            // 监听本地存储变化，实时同步数据
            window.addEventListener('storage', (e) => {
                if (e.key === 'foodOrders') {
                    orders = JSON.parse(e.newValue || '[]');
                    renderOrders();
                    
                    // 检查新订单和订单更新
                    checkForNewOrders();
                    checkForOrderUpdates();
                }
                
                if (e.key === 'foodMenuItems') {
                    menuItems = JSON.parse(e.newValue || '[]');
                    renderMenuItems();
                    renderAdminMenuItems();
                    renderNewArrivals();
                }
                
                if (e.key === 'foodOrderCart') {
                    cart = JSON.parse(e.newValue || '[]');
                    updateCart();
                }
            });
        }
        
        // 初始化应用
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
